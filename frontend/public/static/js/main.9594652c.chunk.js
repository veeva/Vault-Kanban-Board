(this["webpackJsonprank-features"]=this["webpackJsonprank-features"]||[]).push([[0],{140:function(e,n,a){"use strict";a.r(n);var t=a(0),r=a.n(t),c=a(24),s=a.n(c),o=a(159),i=(a(75),a(50)),l=a(51),d=a(52),u=a(98),b=a(97),p=a(4),j=(a(114),a(154)),f=a(150),x=a(160),g=a(151),h=a(2),O=function(){return Object(h.jsx)(f.a,{alignItems:"center",justifyContent:"center",height:"100vh",children:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(x.a,{size:"xl"}),Object(h.jsx)(g.a,{as:"h4",size:"sm",ml:"16px",children:"Loading Data"})]})})},m=a(152),v=a(23),_=a(161),w=function(e){var n=e.cancelRef,a=e.onClose,t=e.isOpen;return Object(h.jsx)(m.a,{isOpen:t,leastDestructiveRef:n,onClose:a,children:Object(h.jsx)(v.f,{children:Object(h.jsxs)(m.b,{children:[Object(h.jsx)(v.e,{fontSize:"lg",fontWeight:"bold",children:"Not Authenticated"}),Object(h.jsx)(v.b,{children:"Log into Veeva Vault to authenticate your session and reload."}),Object(h.jsx)(v.d,{children:Object(h.jsx)(_.a,{ref:n,onClick:a,children:"Close"})})]})})})};w.defaultProps={cancelRef:{},onClose:function(){},isOpen:!0};var k,y,S,N,I,D,C,L,z,A=w,B=a(15),P=a(14),T=a.n(P),R=a(34),E=a(153),M=a(156),J=a(38),F=a(155),W=a(157),H=a(158),K=a(27),V=a(21),G=a(16),U=(G.a.span(k||(k=Object(V.a)(["\n  border-radius: 4px;\n  color: #fff;\n  display: block;\n  overflow: hidden;\n  position: relative;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  float: left;\n  height: 8px;\n  margin: 0 4px 4px 0;\n  max-width: 40px;\n  min-width: 40px;\n  padding: 0;\n  text-shadow: none;\n  width: auto;\n"]))),G.a.div(y||(y=Object(V.a)(["\n  user-select: none;\n  color: rgb(9, 30, 66);\n  cursor: grab;\n  margin: 0;\n  padding: 0;\n  flex-grow: 1;\n  flex-basis: 100%;\n  display: flex;\n  flex-direction: column;\n"])))),q=(G.a.div(S||(S=Object(V.a)(["\n  user-select: none;\n  color: rgb(9, 30, 66);\n  cursor: grab;\n  padding: 0;\n  display: flex;\n  margin-top: 8px;\n  align-items: center;\n  font-size: 12px;\n  flex-wrap: wrap;\n"]))),G.a.h4(N||(N=Object(V.a)(["\n  color: #172b4d;\n  font-weight: 600;\n  padding: 8px;\n  transition: background-color 0.2s ease 0s;\n  flex-grow: 1;\n  user-select: none;\n  position: relative;\n  touch-action: manipulation;\n  cursor: grab;\n  margin-top: 0;\n"])))),Q=G.a.div(I||(I=Object(V.a)(["\n  color: rgb(9, 30, 66);\n  margin: 0;\n  padding: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-top-left-radius: 2px;\n  border-top-right-radius: 2px;\n  background-color: rgb(235, 236, 240);\n  transition: background-color 0.2s ease 0s;\n"]))),X=Object(G.a)(f.a)(D||(D=Object(V.a)(["\n  text-decoration: none;\n  border-radius: 2px;\n  border: 2px solid transparent;\n  background-color: rgb(255, 255, 255);\n  box-shadow: none;\n  box-sizing: border-box;\n  padding: 8px;\n  min-height: 40px;\n  margin-bottom: 8px;\n  user-select: none;\n  color: rgb(9, 30, 66);\n  display: flex;\n  touch-action: manipulation;\n  cursor: grab;\n"]))),Y=Object(G.a)(f.a)(C||(C=Object(V.a)(["\n  color: rgb(9, 30, 66);\n  margin: 0;\n  background-color: rgb(235, 236, 240);\n  display: flex;\n  flex-direction: column;\n  opacity: inherit;\n  padding: 8px 8px 0px;\n  border: 8px;\n  transition: background-color 0.2s ease 0s, opacity 0.1s ease 0s;\n  user-select: none;\n  width: 320px;\n  min-height: 400px;\n  overflow-anchor: none;\n  border-radius: 4px;\n"]))),Z=Object(G.a)(f.a)(L||(L=Object(V.a)(["\n  color: rgb(9, 30, 66);\n  padding: 0;\n  margin: 8px;\n  display: flex;\n  flex-direction: column;\n"]))),$=Object(G.a)(f.a)(z||(z=Object(V.a)(["\n  color: rgb(9, 30, 66);\n  margin: 0;\n  padding: 10;\n  min-height: 100vh;\n  min-width: 100vw;\n  display: inline-flex;\n  justify-content: left;\n  overflow-anchor: none;\n  border-width: 1px;\n  background-color: white;\n  padding-top: 20px;\n  padding-left: 20px;\n"]))),ee=function(e){var n=e.kanbanCard,a=e.index,t=e.kanbanBoard;return Object(h.jsx)(J.b,{draggableId:n.id,index:a,children:function(e){return Object(h.jsx)(X,Object(K.a)(Object(K.a)(Object(K.a)({index:a},e.draggableProps),e.dragHandleProps),{},{ref:e.innerRef,fontSize:["12px","14px"],style:Object(K.a)(Object(K.a)({},e.draggableProps.style),{},{position:"static",backgroundColor:"White"}),children:Object(h.jsxs)(U,{children:[Object(h.jsx)(E.a,{display:"inline-flex",className:"cardTitle",children:n.name__v}),Object(h.jsx)(E.a,{children:Object(h.jsx)("table",{children:t&&t.card_fields.filter((function(e){return e.visible__c})).map((function(e){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{className:"cardFieldLabel",children:e.label__c}),Object(h.jsx)("td",{className:"cardFieldValue",children:n.old_values[e.field_api_name__c]})]})}))})})]})}),n.id)}},n.id)};ee.defaultProps={kanbanBoard:{},kanbanCard:{},index:0};var ne=ee,ae=function(e){var n=e.kanbanSwimline,a=e.kanbanBoard;return Object(h.jsx)(J.c,{droppableId:n.control_value__c,children:function(e){return Object(h.jsx)(Z,{children:Object(h.jsxs)(Y,Object(K.a)(Object(K.a)({ref:e.innerRef},e.droppableProps),{},{style:{backgroundColor:"gray"},children:[Object(h.jsx)(Q,{className:"swimlaneHeader",style:{backgroundColor:n.accent_color_name__c},children:Object(h.jsx)(q,{children:n.label__c})}),n.cards&&n.cards.map((function(e,t){return Object(h.jsx)(ne,{kanbanCard:e,index:t,swimlaneName:n.control_value__c,kanbanBoard:a},e.id)})),e.placeholder]}))})}},n.control_value__c)};ae.defaultProps={kanbanBoard:{},kanbanSwimline:{}};var te=ae,re=a(92),ce=a.n(re),se=function(e){return ce.a.post("".concat("https://30omg3od8k.execute-api.us-east-2.amazonaws.com/app"),e)},oe=function(e,n,a,t){return se({vaultDNS:e,sessionId:n,board:a,page:t,action:"GET_KANBAN_DATA"})},ie=function(e,n,a,t,r){return se({vaultDNS:e,sessionId:n,board:a,page:t,data:r,action:"SET_KANBAN_DATA"})},le=function(e){var n=e.vaultDNS,a=e.sessionId,r=e.board,c=e.page,s=Object(t.useState)(null),o=Object(p.a)(s,2),i=o[0],l=o[1],d=Object(t.useState)(null),u=Object(p.a)(d,2),b=u[0],O=u[1],m=Object(t.useState)(""),v=Object(p.a)(m,2),w=v[0],k=v[1],y=Object(t.useState)(""),S=Object(p.a)(y,2),N=S[0],I=S[1],D=Object(t.useState)(""),C=Object(p.a)(D,2),L=C[0],z=C[1],A=function(){var e=Object(R.a)(T.a.mark((function e(t){var c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("newPageNumber = ".concat(t)),l("Loading data"),e.next=4,oe(n,a,r,t);case 4:c=e.sent,console.log(c),O(c.data.data),console.log(c.data.data),k(c.data.data.label__c),I(c.data.data.allow_save__c),l(null),z(t);case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),P=function(){var e=Object(R.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(L),!(L<b.page_count__c)){e.next=4;break}return e.next=4,A(L+1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(R.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(L),!(L>1)){e.next=4;break}return e.next=4,A(L-1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(R.a)(T.a.mark((function e(n){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"ArrowLeft"===n.key||n.key;case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();Object(t.useEffect)((function(){document.addEventListener("keydown",V),b||A(c)}),[]);var G=function(){var e=Object(R.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=function(){return(t=Object(R.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l("Saving data"),!b){e.next=10;break}return e.next=4,ie(n,a,r,c,b);case 4:t=e.sent,console.log(t),O(t.data.data),console.log(t.data.data),k(t.data.data.label__c),I(t.data.data.allow_save__c);case 10:l(null);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)},function(){return t.apply(this,arguments)}();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)(j.a,{maxH:"500px",maxWidth:"calc(100% - 32px)",width:"calc(100% - 32px)",pr:"0",pl:"0",mr:"0",ml:"0",children:[Object(h.jsxs)(f.a,{className:"boardToolbar",children:[Object(h.jsx)(g.a,{paddingLeft:15,className:"boardLabel",fontSize:"32px",children:w}),N&&!0===N&&Object(h.jsx)(E.a,{marginLeft:"auto",children:Object(h.jsx)(_.a,{colorScheme:"green",size:"sm",leftIcon:Object(h.jsx)(F.a,{}),onClick:function(){return G()},children:"Save"})})]}),i?Object(h.jsxs)(M.a,{mt:"16px",mb:"16px",children:[Object(h.jsx)(x.a,{size:"md"}),Object(h.jsx)(g.a,{as:"h4",size:"sm",ml:"16px",children:i})]}):Object(h.jsxs)($,{onKeyPress:V,children:[Object(h.jsx)(f.a,{paddingTop:"8px",children:Object(h.jsx)(E.a,{children:Object(h.jsx)(_.a,{disabled:L<=1,paddingBottom:"200",paddingLeft:"2",paddingRight:"0",paddingTop:"200",colorScheme:L>1?"blackAlpha":"white",size:"lg",leftIcon:L>1?Object(h.jsx)(W.a,{}):"",onClick:function(){return K()}})})}),Object(h.jsx)(J.a,{onDragEnd:function(e){if(b.allow_save__c){var n=e.destination,a=e.source,t=e.draggableId;if(!n)return;if(n.droppableId===a.droppableId)return;!function(e,n,a){console.log(e),console.log(n),console.log(a);var t=JSON.parse(JSON.stringify(b)),r=e.droppableId,c=t.swimlanes.find((function(e){return e.control_value__c===r})),s=n.droppableId,o=t.swimlanes.find((function(e){return e.control_value__c===s})),i=o.cards.find((function(e){return e.id===a})),l=b.control_field__c;i.new_values||(i.new_values={id:null,controlField:null}),i.new_values.id=a,i.new_values[l]=r;var d=null;c.cards?(d=[].concat(Object(B.a)(c.cards.filter((function(e){return e.name__v<i.name__v}))),[i],Object(B.a)(c.cards.filter((function(e){return e.name__v>i.name__v})))),c.cards=d):c.cards=[i],o.cards&&o.cards.length>1?o.cards=o.cards.filter((function(e){return e.id!==a})).map((function(e){return e})):o.cards=[],O(t)}(n,a,t)}},children:b&&b.swimlanes.filter((function(e){return e.visible__c})).map((function(e){return Object(h.jsx)(te,{kanbanSwimline:e,kanbanBoard:b},e.control_value__c)}))}),Object(h.jsx)(f.a,{paddingTop:"8px",children:b&&L<b.page_count__c&&Object(h.jsx)(E.a,{children:Object(h.jsx)(_.a,{paddingBottom:"200",paddingLeft:"2",paddingRight:"0",paddingTop:"200",colorScheme:"blackAlpha",size:"lg",leftIcon:Object(h.jsx)(H.a,{}),onClick:function(){return P()}})})})]})]})};le.defaultProps={vaultDNS:"",sessionId:"",board:"",page:""};var de=le;function ue(e){var n=e.vaultDNS,a=e.sessionId,c=e.board,s=e.page,o=Object(t.useState)(!1),i=Object(p.a)(o,2),l=i[0],d=i[1],u=r.a.useRef();return Object(h.jsxs)(h.Fragment,{children:[l&&Object(h.jsx)(O,{}),l&&Object(h.jsx)(A,{cancelRef:u,isOpen:l,onClose:function(){return d(!1)}}),Object(h.jsx)(j.a,{alignItems:"left",justifyContent:"center",flexDirection:"column",marginTop:"10px",marginLeft:"32px",marginBottom:"20px",width:"calc(100% - 64px)",maxWidth:"calc(100% - 64px)",pr:"0",pl:"0",mr:"0"}),!l&&Object(h.jsx)(de,{vaultDNS:n,sessionId:a,board:c,page:s})]})}ue.defaultProps={vaultDNS:"",sessionId:"",board:"",page:""};var be=ue,pe=function(e){Object(u.a)(a,e);var n=Object(b.a)(a);function a(e){var t;return Object(i.a)(this,a),(t=n.call(this,e)).state={vaultDNS:null,sessionId:null,board:null,page:null},t.receiveMessage=t.receiveMessage.bind(Object(d.a)(t)),t}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=JSON.stringify({message_id:"ready",data:{}}),n=new URLSearchParams(window.location.search);this.setState({vaultDNS:n.has("vaultDNS")?n.get("vaultDNS"):null,sessionId:n.has("sessionId")?n.get("sessionId"):null,board:n.has("board")?n.get("board"):null,page:n.has("page")?Number(n.get("page")):1}),this.state.sessionId||(window.parent.postMessage(e,"*"),window.addEventListener("message",this.receiveMessage))}},{key:"receiveMessage",value:function(e){var n=JSON.parse(e.data);"session_id"===n.message_id&&(this.setState({sessionId:n.data.session_id}),window.removeEventListener("message",this.receiveMessage))}},{key:"render",value:function(){return this.state.sessionId?Object(h.jsx)(be,{sessionId:this.state.sessionId,vaultDNS:this.state.vaultDNS,board:this.state.board,page:this.state.page}):Object(h.jsx)(O,{})}}]),a}(t.Component);s.a.render(Object(h.jsx)(t.StrictMode,{children:Object(h.jsx)(o.a,{children:Object(h.jsx)(pe,{})})}),document.getElementById("root"))},75:function(e,n,a){}},[[140,1,2]]]);
//# sourceMappingURL=main.9594652c.chunk.js.map